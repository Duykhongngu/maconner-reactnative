"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["53086"],{324510:function(e,a,n){var l,i,t,r,s,d,u,o,c,p,g,m;n.r(a),n.d(a,{default:()=>y});let _=(l=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],r={alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},s={alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null}],storageKey:null},u={alias:"image236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:d=[t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"236x")'},g={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{fragment:{argumentDefinitions:l,kind:"Fragment",metadata:null,name:"CloseupPageDesktopQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[t,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[r,{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[s],storageKey:null},{args:null,kind:"FragmentSpread",name:"CloseupPageDesktop_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:l,kind:"Operation",name:"CloseupPageDesktopQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[t,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[r,{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[s,{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null},u,o={alias:"image474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:d,storageKey:'additionalImagesPerSpec(spec:"474x")'},c={alias:"image564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:d,storageKey:'additionalImagesPerSpec(spec:"564x")'},p={alias:"image736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:d,storageKey:'additionalImagesPerSpec(spec:"736x")'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[g,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:d,storageKey:null}],storageKey:null},u,o,c,p],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[g],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:d,storageKey:null},m],storageKey:null},{alias:null,args:null,concreteType:"ProductMetadataV2",kind:"LinkedField",name:"productPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"ItemMetadata",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"additionalImagesLength",storageKey:null}],storageKey:null},m],storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:d,storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},m],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[t,m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seoTitle",storageKey:null},m],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"4dba54d933723961cb76bd879b51910b96030d0a21eb0148b743c086929f8967",metadata:{},name:"CloseupPageDesktopQuery",operationKind:"query",text:null}});_.hash="3e5e91c4b622e8c344672c0f5a2b65a8";let y=_;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let a=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[a]=e}}}(_.default||_)},908200:function(e,a,n){n.r(a),n.d(a,{default:()=>i});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupPageDesktop_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seoTitle",storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};l.hash="9b6d0fabe3eb4d1aea5102ede0ed6b13";let i=l},763538:function(e,a,n){n.d(a,{YS:()=>s,eF:()=>d,m_:()=>r});var l=n(465989),i=n(236269),t=n(767415);function r(e,a,n,i,r){let s=new URLSearchParams,d=a.reduce((e,a)=>{if(null!=a){let n=function(e){let a;try{a=decodeURIComponent(e)}catch(n){a=e}a.startsWith("http")?a.startsWith("http://")&&(a=a.replace("http://","https://")):a="https://"+a;try{return new URL(a).origin}catch(l){let n=a.match(/^(https?:\/\/[^\/]+)(\/|$)/);if(n&&n.length>1)return n[1];return e}}(a);return e.add(n)}return e},new Set);s.append(l.NR.SOURCE_EVENT_ID,e??"0"),s.append(l.NR.DESTINATION,JSON.stringify([...d])),s.append(l.NR.EXPIRY,n?l.uV:l.ug),s.append(l.NR.PRIORITY,n?l.NR.CLICK_PRIORITY:l.NR.VIEW_PRIORITY),r&&s.append(l.NR.ADVERTISER_ID,r),i&&s.append(l.NR.CAMPAIGN_ID,i),s.append(l.NR.SOURCE_EVENT_TYPE,n?l.bC:l.Cu);try{let{hostname:e}=new URL(window.location.href);"www.pinterest.com"!==e&&s.append(l.NR.HOSTNAME,e)}catch(e){(0,t.nP)("webapp.arapi.generateARASourceEventURL",{sampleRate:.1,tags:{status:"failed",href:window&&window.location&&window.location.href}})}return"https://www.pinterest.com/attribution_source/?"+s.toString()}async function s(e,a,n,l,s,d,u,o,c){let p;let{appType:g,osType:m}=d||{},_="",y="";if(["Pin","pinImpressions"].includes(e)&&a&&(l||o||c)){(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"start",appType:g,osType:m}});try{if(!window.document.featurePolicy?.allowsFeature("attribution-reporting")){(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"skipped",message:"attribution-reporting is not enabled",appType:g,osType:m}});return}_=r(n,[l,o,c],!1,s,u);try{y=new URL(window.location.href).hostname}catch(e){(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"hostname_parse_failed",href:window&&window.location&&window.location.href}})}if(y&&"www.pinterest.com"!==y)document.createElement("img").setAttribute("attributionsrc",_),(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"international",appType:g,osType:m,hostname:y}});else if(!(p=await window.fetch(_,{keepalive:!0,attributionReporting:{eventSourceEligible:!0,triggerEligible:!1}})).ok)throw Error("server request failed.");(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"success",appType:g,osType:m}})}catch(e){(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"failed",error:(0,i.Z)(e,"name"),message:(0,i.Z)(e,"message"),appType:g,osType:m,hostname:y,responseStatus:p&&p.status}})}}else(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"missing_param",appType:g,osType:m}})}function d(e){if(e){let a=e.toLowerCase();if(a.includes("windows"))return"windows xp"===a?1:"windows vista"===a?2:"windows 7"===a?3:"windows 8"===a?4:12;if(a.includes("mac os"))return 5;if(a.includes("android"))return 7;if(a.includes("ios"))return 6;if(a.includes("ubuntu"))return 8;if(a.includes("chromium os"))return 13}return 0}},343669:function(e,a,n){n.d(a,{G6:()=>t,i7:()=>r,oi:()=>l,u$:()=>i,un:()=>d,vU:()=>s,w1:()=>u});let l=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),i=e=>e?e.includes("Chrome")?l.CHROME:e.includes("Safari")?l.SAFARI:e.includes("Firefox")?l.FIREFOX:e.includes("Opera")?l.OPERA:e.includes("IE")?l.IE:e.includes("Edge")?l.EDGE:l.OTHER:l.OTHER;function t(e){return i(e)===l.SAFARI}function r(e){return i(e)===l.CHROME}function s(e){return i(e)===l.FIREFOX}function d(e){return i(e)===l.EDGE}function u(e){return i(e)===l.IE}},281213:function(e,a,n){n.d(a,{W:()=>o,r:()=>u});var l=n(667294),i=n(230201),t=n(213491),r=n(613567),s=n(785893);let{Provider:d,useHook:u}=(0,t.Z)("VideoPlayer");function o({children:e}){let{logContextEvent:a,logImpression:n}=(0,i.v)(),{checkExperiment:t}=(0,r.F)(),[u,o]=(0,l.useState)(!1),[c,p]=(0,l.useState)([]),[g,m]=(0,l.useState)([]),[_,y]=(0,l.useState)({}),h=t("web_ads_mrc_video_impression").anyEnabled,k=e=>{y(a=>({...a,[e]:!0}))},P=(0,l.useCallback)(e=>{if(18===e.event_type&&e.event_data?.pinImpressions?.length){let{isNativeVideoAndWatchable:a}=e.event_data.pinImpressions[0],n=JSON.stringify(e.aux_data?.commerce_data||"").includes("story_pin_id");h&&(a||n)&&p(a=>[...a,e].slice(-1e3))}},[h]),f=(0,l.useCallback)(e=>{18===e.eventType&&h&&m(a=>[...a,e].slice(-1e3))},[h]),v=e=>{let{time:a}=e.event_data.pinImpressions[0];return{...e,event_data:{...e.event_data,pinImpressions:[{...e.event_data.pinImpressions[0],isMrcBtr:!0,endTime:a,renderDuration:0}]}}},S=e=>{if(e.eventData){let{time:a}=e.eventData;return{...e,eventData:{...e.eventData,isMrcBtr:!0,endTime:a??0}}}return null};(0,l.useEffect)(()=>{let e=c.filter(e=>{let{pinIdStr:n}=e.event_data.pinImpressions[0];return!_[n]||!h||(a(v(e)),!1)});e.length!==c.length&&p(e)},[c,h,a,_]),(0,l.useEffect)(()=>{let e=g.filter(e=>{let a=e.eventData?.pinIdStr;if(!a)return!1;if(_[a]&&h){let a=S(e);return a&&n(a),!1}return!0});e.length!==g.length&&m(e)},[g,h,n,_]);let F=(0,l.useMemo)(()=>({captionsEnabled:u,logMrcVideoAdImpressionOnPlay:f,logMrcVideoAdEventOnPlay:P,setCaptionsEnabled:o,setVideoPlayed:k,videosPlayed:_}),[u,P,f,_]);return(0,s.jsx)(d,{value:F,children:e})}},446473:function(e,a,n){n.d(a,{A:()=>l});let l="socialPinLanding"},550946:function(e,a,n){n.d(a,{Z:()=>r});var l=n(27399),i=n(236269),t=n(271875);function r(){let{conversationCreate:e}=(0,t.Z)();return async a=>{let n;let t=l.Z.create("ConversationsResource",a);try{let a=(await t.callCreate()).resource_response.data;a&&(e(a),n=a)}catch(e){throw Error((0,i.Z)(e,"message"))}return n}}},2061:function(e,a,n){n.d(a,{Yg:()=>d,ib:()=>o,nF:()=>p,xX:()=>c});var l=n(613567),i=n(774838),t=n(739405),r=n(767415);let s=({checkExperiment:e})=>{let{group:a}=e("auth_mweb_graphql_pin_page",{dangerouslySkipActivation:!0});return{logStat:(e,n)=>(0,r.nP)("webapp.graphql.debug_auth_mweb_graphql_pin_page",{sampleRate:1,tags:{event:e,group:a,...n}})}},d=()=>{let{isAuthenticated:e}=(0,i.B)(),a=(0,t.HG)(),{checkExperiment:n}=(0,l.F)();return e&&!a?s({checkExperiment:n}):{logStat:()=>{}}},u=0,o=({checkExperiment:e,isAuthMweb:a})=>{if(!a)return;let{logStat:n}=s({checkExperiment:e});(u+=1)<10&&n(`repin_${u}`)};function c({checkExperiment:e,isDesktop:a,isAuthenticated:n}){if(!n)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"SuspendOnMissingData",isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};if(a){let{anyEnabled:a}=e("auth_dweb_graphql_pin_page");return{isGraphQLEnabledForRelatedPins:a,isGraphQLEnabledInGeneral:a,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!1}}{let{anyEnabled:a,group:n}=e("auth_mweb_graphql_pin_page");switch(n){case"control":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"only_impression_fix":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!0,addRelatedPinsLatency:!1};case"enabled":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"SuspendOnMissingData",isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"enabled_and_impression_fix":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"SuspendOnMissingData",isImpressionFixEnabled:!0,addRelatedPinsLatency:!1};case"only_related_pins":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"only_related_pins_and_impression_fix":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!0,addRelatedPinsLatency:!1};case"should_render_with_missing_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"RenderWithMissingData",isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"render_and_subscribe":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"RenderWithMissingDataAndSubscribe",isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"add_related_pins_latency":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!0};default:return{isGraphQLEnabledInGeneral:a,isGraphQLEnabledForRelatedPins:a,closeupPageSuspenseBehavior:a?"SuspendOnMissingData":null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!1}}}}function p(){let{checkExperiment:e}=(0,l.F)(),a=(0,t.HG)(),{isAuthenticated:n}=(0,i.B)();return c({checkExperiment:e,isDesktop:a,isAuthenticated:n})}},20717:function(e,a,n){n.d(a,{_l:()=>v,cO:()=>f,t2:()=>S,w2:()=>F,xM:()=>P});var l=n(667294),i=n(616550),t=n(173874),r=n(613567),s=n(774838),d=n(661376),u=n(575820),o=n(739405),c=n(462867),p=n(785893);let g="UnauthDesktopSocialPinLandingPageContext",m="AthDesktopSocialPinLandingPageContext",_="AuthMobileSocialPinLandingPageContext",y=(0,l.createContext)(),h=({children:e})=>{let[a,n]=(0,l.useState)(!1),[i,t]=(0,l.useState)(!1),r=(0,l.useMemo)(()=>({hasSeenAuthMobileLandingToast:a,setHasSeenAuthMobileLandingToast:n,hasSeenAuthDesktopLandingToast:i,setHasSeenAuthDesktopLandingToast:t}),[a,n,i,t]);return(0,p.jsx)(y.Provider,{value:r,children:e})},k=(0,l.createContext)({key:"",data:null}),P=({children:e})=>{let a=(0,i.TH)(),n=(0,c.Z)(),y=n&&n.isAuth,P=(0,o.HG)(),{isBot:f}=(0,s.B)(),v=!f&&(0,t.fY)(a)&&(0,u.mB)(a.search).invite_code||"",S=(0,i.LX)(a.pathname,{path:"/pin/:id"}),F=String(S&&"id"in S.params&&S.params.id)||"",[b,w]=(0,l.useState)({key:"",data:null}),E=!y&&P,{checkExperiment:L}=(0,r.F)(),{anyEnabled:R,group:I}=E&&v&&L("sg_dweb_unauth_social_pin_landing_page")||{},x="enabled_popover_profile"===I,K=(0,d.Z)(v?{name:"InviteCodeMetadataResource",options:{invite_code:v,field_set_key:x?"default_with_sender_recent_pins":"default"}}:null),T=K.isLoaded?K.data:null;return(0,l.useEffect)(()=>{if(T){let e=T.sender??null,a=y&&e.id!==n.id&&e?.should_show_messaging&&n.should_show_messaging;if(E&&e){let a=null;a=R?{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,expGroup:I,inviterRecentPins:"enabled_popover_profile"===I&&e.recent_pin_images?.["222x"]||[]}:[5,9,12,16].includes(T.invite_channel)?null:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name},w({key:g,data:{inviter:e,popoverData:a}})}else a&&!P?w({key:_,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:n.id||""},pin:{pinId:F}}}}):a&&P&&w({key:m,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:n.id||""},pin:{pinId:F}}}})}else w({key:"",data:null})},[T,y,P,F,n,R,I,E]),(0,p.jsx)(h,{children:(0,p.jsx)(k.Provider,{value:b,children:e})})},f=()=>{let e=(0,l.useContext)(k);return e.key===g?e:null},v=()=>{let e=(0,l.useContext)(k);return e.key===_?e:null},S=()=>{let e=(0,l.useContext)(k);return e.key===m?e:null},F=()=>(0,l.useContext)(y)},992071:function(e,a,n){n.d(a,{Z:()=>P});var l=n(616550),i=n(883119),t=n(230201),r=n(236269),s=n(583875),d=n(924591),u=n(138596),o=n(216975),c=n(577356),p=n(739405),g=n(462867),m=n(446473),_=n(550946),y=n(271875),h=n(20717),k=n(785893);function P({hideToast:e,pinAttachment:a}){let n=(0,u.ZP)(),P=(0,l.k6)(),{logContextEvent:f}=(0,t.v)(),{showToast:v}=(0,c.F9)(),S=(0,_.Z)(),F=(0,g.Z)(),{conversationOpen:b,dropdownOpen:w,setObjectAttachment:E}=(0,y.Z)(),L=(0,p.HG)(),R=(0,h.t2)(),I=(0,h._l)(),x=L?R?.data:I?.data,K=x&&"toastData"in x?x.toastData:null,T=L?14344:14343;if(K){let{inviter:l,viewer:t}=K,u=(0,k.jsx)(i.xv,{inline:!0,weight:"bold",children:l.inviterName}),c=(0,k.jsx)(i.xv,{children:(0,o.nk)(n.bt("Thích Ghim này? Hãy cho {{ inviterName }} biết!", "Like this Pin? Let {{ inviterName }} know.", "SocialPinLandingPage.AuthSocialPinLandingPage.toastText", undefined, true),{inviterName:u})}),p=({conversationId:e,pinAttachment:a})=>{L?(w(),b(e)):P.push(`/conversation/${e}`),E(a)},g=async()=>{f({event_type:L?101:102,view_type:3,view_parameter:156,component:T});try{let e=await S({user_ids:[l.inviterId,t.viewerId]});if(e){let n=e.id;p({conversationId:n,pinAttachment:{...a,source:m.A}})}}catch(e){v(({hideToast:a})=>(0,k.jsx)(d.Z,{onHide:a,text:(0,r.Z)(e,"message")??""}))}};return f({event_type:13,view_type:3,view_parameter:156,component:T}),(0,k.jsx)(i.kC,{justifyContent:"center",children:(0,k.jsx)(i.iP,{onTap:()=>{g(),e()},children:(0,k.jsx)(d.Z,{duration:7e3,onHide:e,primaryAction:{accessibilityLabel:n.bt("Trả lời", "Reply", "SocialPinLandingPage.AuthToast.replyButtonAccessibilityLabel", undefined, true),label:n.bt("Trả lời", "Reply", "SocialPinLandingPage.AuthToast.replyButton", undefined, true),size:"lg",onClick:()=>{}},text:c,thumbnail:{avatar:(0,k.jsx)(s.qE,{color:F.isAuth?F.avatar_color_index:void 0,name:l.inviterName,src:l.inviterAvatarUrl})}})})})}}},793026:function(e,a,n){n.d(a,{Z:()=>A});var l,i,t=n(667294),r=n(167912),s=n(616550),d=n(883119),u=n(451091),o=n(399312),c=n(286074),p=n(59355),g=n(907022),m=n(400962),_=n(566431),y=n(825605),h=n(577356),k=n(575647),P=n(462867),f=n(68876),v=n(60707),S=n(2061),F=n(250704),b=n(20717),w=n(992071),E=n(228612),L=n(785893);let R=void 0!==l?l:l=n(324510),I=void 0!==i?i:i=n(908200);function x({isEligibleForPdp:e,pinId:a,ratingValue:n,pinKey:l}){let i=(0,m.aX)(),r=(0,s.k6)(),y=(0,s.TH)(),f=(0,P.Z)(),{trafficSource:S}=(0,o.Z)(i,f.isAuth),E=(0,g.Z)(I,l),R=E?.gridTitle||E?.gridDescription||E?.richMetadata?.title||E?.richSummary?.displayName||E?.richMetadata?.article?.name,{showToast:x}=(0,h.F9)(),K=(0,b.t2)(),T=(0,b.w2)();(0,t.useEffect)(()=>{document.title=R?.trim()||E?.seoTitle?.trim()||_.yp},[R,E?.seoTitle]),(0,t.useEffect)(()=>{if(!T||T.hasSeenAuthDesktopLandingToast)return()=>{};let{setHasSeenAuthDesktopLandingToast:e}=T,n=setTimeout(()=>{if(K){let n={type:"pin",id:a};e(!0),x(({hideToast:e})=>(0,L.jsx)(w.Z,{hideToast:e,pinAttachment:n}))}},3e3);return()=>{clearTimeout(n)}},[K,a,x,T]);let A=(0,k.Z)(E);return((0,p.Q)({view_type:3,object_id_str:a,view_data:{pin_id:a},component:13283,aux_data:{current_page_url:y.pathname+y.search,closeup_navigation_type:(0,v.Z)(r,S),...A(),...n?{rating_value:n}:{},is_go_linkless:!!E?.isGoLinkless},clientTrackingParams:(0,F.Z)((y?.state||{}).trackingParams,E?.trackingParams)},a),e)?(0,L.jsx)(d.xu,{"data-test-id":"pdp-container",children:(0,L.jsx)(c.Z,{})}):(0,L.jsx)(d.xu,{"data-test-id":"closeup-container",children:(0,L.jsx)(u.ZP,{})})}function K({pinId:e}){let a=function({pinId:e}){return{query:R,variables:{pinId:e}}}({pinId:e}),n=(0,r.useLazyLoadQuery)(R,a.variables),l=n.v3GetPinQuery?.data;return(0,L.jsx)(x,{isEligibleForPdp:l?.isEligibleForPdp??!1,pinId:e,pinKey:l,ratingValue:l?.richSummary?.aggregateRating?.ratingValue})}function T({pinId:e}){let a=(0,E.S6)(),n=e?a(e):null;return(0,L.jsx)(x,{isEligibleForPdp:n?.is_eligible_for_pdp??!1,pinId:e,pinKey:null!=n?{type:"deprecated",data:n}:null,ratingValue:n?.rich_summary?.aggregate_rating?.rating_value})}function A(){let{id:e}=(0,s.UO)(),{isGraphQLEnabledInGeneral:a}=(0,S.nF)();return(0,L.jsx)(f.Z,{type:"authDesktop",children:a?(0,L.jsx)(y.Z,{children:(0,L.jsx)(K,{pinId:e||""})}):(0,L.jsx)(T,{pinId:e||""})})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/53086.vi_VN-3019367314614dbc.mjs.map